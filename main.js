(()=>{"use strict";const e=function(e){document.getElementById("taskButton").style.visibility="hidden",document.querySelector(".taskFormContainer").style.visibility="hidden",document.querySelector(".contentHeader").textContent="All";const t=document.querySelector(".taskContainer");t.innerHTML="",e.forEach(((n,o)=>{let i=n.tasks;i.forEach(((n,o)=>{console.log(n);let l=document.createElement("div");l.classList.add("task"),t.appendChild(l);let r=document.createElement("input");r.classList.add("taskTitle"),r.value=n.title,l.appendChild(r);let c=document.createElement("input");c.classList.add("taskDescription"),c.value=n.description,l.appendChild(c);let d=document.createElement("select");d.classList.add("taskPriority"),d.textContent=n.priority,l.appendChild(d);let a=document.createElement("option");a.classList.add("lowPriority"),a.value="Low Priority",a.textContent="Low Priority",d.appendChild(a);let s=document.createElement("option");s.classList.add("highPriority"),s.value="High Priority",s.textContent="High Priority",d.appendChild(s);let u=document.createElement("input");u.classList.add("showDueDate"),u.type="Date",u.value=n.dueDate,l.appendChild(u);let p=document.createElement("button");p.classList.add("taskEditAndSubmit"),p.textContent="Submit",l.appendChild(p),r.addEventListener("keypress",(t=>{"Enter"==t.key&&(n.title=r.value,n.description=c.value,n.priority=d.value,n.dueDate=u.value,console.log(e),r.blur())})),c.addEventListener("keypress",(t=>{"Enter"==t.key&&(n.title=r.value,n.description=c.value,n.priority=d.value,n.dueDate=u.value,console.log(e),c.blur())})),p.addEventListener("click",(()=>{n.title=r.value,n.description=c.value,n.priority=d.value,n.dueDate=u.value,"High Priority"==n.priority?(l.style.borderColor="red",s.selected=!0):"Low Priority"==n.priority?(l.style.borderColor="green",a.selected=!0):l.style.borderColor="black",console.log(i)})),"High Priority"==n.priority?(l.style.borderColor="red",s.selected=!0):"Low Priority"==n.priority?(l.style.borderColor="green",a.selected=!0):l.style.borderColor="black";let m=document.createElement("button");m.classList.add("taskDelete"),m.textContent="Delete",l.appendChild(m),m.addEventListener("click",(()=>{i.splice(o,1),l.remove(),console.log(o),console.log(n),console.log(i)}))}))}))};let t=[];class n{constructor(e,t,n){this.title=e,this.index=t,this.tasks=[]}}class o{constructor(e,t,n,o){this.title=e,this.description=t,this.priority=n,this.dueDate=o}}function i(){const n=document.querySelector(".projectContainer");let r=document.querySelector(".contentHeader");const c=document.querySelector(".taskContainer");n.innerHTML="",n.textContent="Projects",t.forEach(((d,a)=>{const s=document.createElement("div");s.classList.add("project"),n.appendChild(s);const u=document.createElement("div");u.classList.add("projectTitle"),u.textContent=d.title,s.appendChild(u);let p=document.createElement("button");p.setAttribute("id","deleteProject"),p.textContent="X",s.appendChild(p),p.addEventListener("click",(()=>{t.splice(a,1),s.remove(),i(),r.textContent==d.title&&e(t),console.log(t)})),u.addEventListener("click",(()=>{c.innerHTML="",r.textContent=d.title,l(a),function(e){const n=document.querySelector(".taskFormContainer");n.innerHTML="",document.querySelector(".taskContainer");const i=document.createElement("input");i.setAttribute("id","taskTitle"),i.placeholder="title",n.appendChild(i);const r=document.createElement("input");r.setAttribute("id","taskDescription"),r.placeholder="description",n.appendChild(r);const c=document.createElement("select");c.setAttribute("id","taskPriority"),n.appendChild(c);const d=document.createElement("option");d.value="No Priority",d.textContent="No Priority",c.appendChild(d);const a=document.createElement("option");a.value="High Priority",a.textContent="High Priority",c.appendChild(a);const s=document.createElement("option");s.value="Low Priority",s.textContent="Low Priority",c.appendChild(s);const u=document.createElement("input");u.setAttribute("id","taskDueDate"),u.type="Date",u.textContent="Due Date",n.appendChild(u);const p=document.createElement("button");p.setAttribute("id","submitTask"),p.textContent="Submit",n.appendChild(p);const m=document.createElement("button");m.setAttribute("id","cancelTask"),m.textContent="Cancel",n.appendChild(m),p.addEventListener("click",(()=>{let n=document.getElementById("taskTitle").value,i=document.getElementById("taskDescription").value,r=document.getElementById("taskPriority").value,c=document.getElementById("taskDueDate").value,d=new o(n,i,r,c);t.at(e).tasks.push(d),console.log(t),console.log(r),l(e),document.querySelector(".taskFormContainer").style.visibility="hidden"})),m.addEventListener("click",(()=>{n.style.visibility="hidden"}))}(a),function(){const e=document.getElementById("taskButton");e.style.visibility="visible";const t=document.querySelector(".taskFormContainer");e.addEventListener("click",(()=>{t.style.visibility="visible",document.getElementById("taskTitle").value="",document.getElementById("taskDescription").value="",document.getElementById("taskPriority").value="",document.getElementById("taskDueDate").value=""}))}(),console.log(t),console.log(a)}))}))}function l(e){const n=document.querySelector(".taskContainer");n.innerHTML="";let o=t.at(e).tasks;o.forEach(((e,i)=>{let l=document.createElement("div");l.classList.add("task"),n.appendChild(l);let r=document.createElement("input");r.classList.add("taskTitle"),r.value=e.title,l.appendChild(r);let c=document.createElement("input");c.classList.add("taskDescription"),c.value=e.description,l.appendChild(c);let d=document.createElement("select");d.classList.add("taskPriority"),l.appendChild(d),d.addEventListener("change",(n=>{"No Priority"==n.currentTarget.value?(n.currentTarget.value=a.value,e.priority=n.currentTarget.value,l.style.borderColor="black",console.log(t),a.blur()):"Low Priority"==n.currentTarget.value?(n.currentTarget.value=s.value,e.priority=n.currentTarget.value,l.style.borderColor="green",console.log(t),s.blur()):"High Priority"==n.currentTarget.value&&(n.currentTarget.value=u.value,e.priority=n.currentTarget.value,l.style.borderColor="red",console.log(t),u.blur())}));let a=document.createElement("option");a.classList.add("noPriority"),a.value="No Priority",a.textContent="No Priority",d.appendChild(a);let s=document.createElement("option");s.classList.add("lowPriority"),s.value="Low Priority",s.textContent="Low Priority",d.appendChild(s);let u=document.createElement("option");u.classList.add("highPriority"),u.value="High Priority",u.textContent="High Priority",d.appendChild(u);let p=document.createElement("input");p.classList.add("showDueDate"),p.type="Date",p.value=e.dueDate,l.appendChild(p),p.addEventListener("change",(t=>{t.currentTarget.value=p.value,e.dueDate=t.currentTarget.value,console.log(e)})),r.addEventListener("keypress",(n=>{"Enter"==n.key&&(e.title=r.value,e.description=c.value,e.priority=d.value,e.dueDate=p.value,console.log(t),r.blur())})),c.addEventListener("keypress",(n=>{"Enter"==n.key&&(e.title=r.value,e.description=c.value,e.priority=d.value,e.dueDate=p.value,console.log(t),c.blur())})),"High Priority"==e.priority?(l.style.borderColor="red",u.selected=!0):"Low Priority"==e.priority?(l.style.borderColor="green",s.selected=!0):l.style.borderColor="black";let m=document.createElement("button");m.classList.add("taskDelete"),m.textContent="X",l.appendChild(m),m.addEventListener("click",(()=>{o.splice(i,1),l.remove(),console.log(i),console.log(e),console.log(o)}))}))}!function(){const e=document.querySelector(".projectContainer"),o=document.createElement("div");o.textContent="Default",e.appendChild(o),document.querySelector(".contentHeader").textContent=o.textContent,document.getElementById("taskButton").style.visibility="visibile";let l=o.textContent,r=new n(l);t.push(r),i(),console.log(t)}(),function(){const e=document.querySelector(".projectFormContainer"),t=document.querySelector(".projectButton"),n=document.getElementById("projectName");t.addEventListener("click",(()=>{n.value="",e.style.visibility="visible"}))}(),function(){const e=document.getElementById("submitProject"),o=document.querySelector(".projectContainer");e.addEventListener("click",(()=>{o.innerHTML="",o.textContent="Projects";let e=document.getElementById("projectName").value,l=new n(e);t.push(l),console.log(t),i(),document.querySelector(".projectFormContainer").style.visibility="hidden"}))}(),function(){const e=document.getElementById("cancelProject"),t=document.querySelector(".projectFormContainer");e.addEventListener("click",(()=>{t.style.visibility="hidden"}))}(),document.querySelector(".allTasks").addEventListener("click",(()=>{e(t)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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U0ksY0FBYyxhQUFhNkIsaUJBQWlCLFNBQVMsS0FDMUQsRUFBU2xDLEVBQVUsRyIsInNvdXJjZXMiOlsid2VicGFjazovL3RvLWRvLWxpc3QvLi9zcmMvYWxsVGFza3MuanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBhbGxUYXNrcyAobXlQcm9qZWN0cyl7XG4gICAgY29uc3QgdGFza0J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YXNrQnV0dG9uJylcbiAgICB0YXNrQnV0dG9uLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcbiAgICBjb25zdCB0YXNrRm9ybUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50YXNrRm9ybUNvbnRhaW5lcicpO1xuICAgIHRhc2tGb3JtQ29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGVudEhlYWRlcicpLnRleHRDb250ZW50ID0gJ0FsbCdcbiAgICBjb25zdCB0YXNrQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRhc2tDb250YWluZXInKTtcbiAgICB0YXNrQ29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xuICAgIG15UHJvamVjdHMuZm9yRWFjaCgoZSxpKT0+e1xuICAgICAgICBsZXQgdGFza0FycmF5ID0gZS50YXNrc1xuICAgICAgICB0YXNrQXJyYXkuZm9yRWFjaCgoZSxpKT0+e1xuICAgICAgICAgICAgY29uc29sZS5sb2coZSlcblxuICAgICAgICAgICAgXG5cbiAgICAgICAgICAgIFxuXG4gICAgICAgICAgICBcblxuICAgICAgICAgICAgbGV0IHRhc2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIHRhc2suY2xhc3NMaXN0LmFkZCgndGFzaycpXG4gICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0YXNrQ29udGFpbmVyLmFwcGVuZENoaWxkKHRhc2spXG4gICAgXG4gICAgICAgICAgICBsZXQgdGFza1RpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgICAgIHRhc2tUaXRsZS5jbGFzc0xpc3QuYWRkKCd0YXNrVGl0bGUnKTtcbiAgICAgICAgICAgIHRhc2tUaXRsZS52YWx1ZSA9IGUudGl0bGU7XG4gICAgICAgICAgICB0YXNrLmFwcGVuZENoaWxkKHRhc2tUaXRsZSk7XG4gICAgXG4gICAgICAgICAgICBsZXQgdGFza0Rlc2NyaXB0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgICAgIHRhc2tEZXNjcmlwdGlvbi5jbGFzc0xpc3QuYWRkKCd0YXNrRGVzY3JpcHRpb24nKVxuICAgICAgICAgICAgdGFza0Rlc2NyaXB0aW9uLnZhbHVlID0gZS5kZXNjcmlwdGlvbjtcbiAgICAgICAgICAgIHRhc2suYXBwZW5kQ2hpbGQodGFza0Rlc2NyaXB0aW9uKTtcbiAgICBcbiAgICAgICAgICAgIGxldCB0YXNrUHJpb3JpdHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzZWxlY3QnKTtcbiAgICAgICAgICAgIHRhc2tQcmlvcml0eS5jbGFzc0xpc3QuYWRkKCd0YXNrUHJpb3JpdHknKVxuICAgICAgICAgICAgdGFza1ByaW9yaXR5LnRleHRDb250ZW50ID0gZS5wcmlvcml0eTtcbiAgICAgICAgICAgIHRhc2suYXBwZW5kQ2hpbGQodGFza1ByaW9yaXR5KTtcbiAgICBcbiAgICAgICAgICAgIGxldCBsb3dQcmlvcml0eSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xuICAgICAgICAgICAgbG93UHJpb3JpdHkuY2xhc3NMaXN0LmFkZCgnbG93UHJpb3JpdHknKTtcbiAgICAgICAgICAgIGxvd1ByaW9yaXR5LnZhbHVlID0gJ0xvdyBQcmlvcml0eSc7XG4gICAgICAgICAgICBsb3dQcmlvcml0eS50ZXh0Q29udGVudCA9ICdMb3cgUHJpb3JpdHknXG4gICAgICAgICAgICB0YXNrUHJpb3JpdHkuYXBwZW5kQ2hpbGQobG93UHJpb3JpdHkpO1xuICAgIFxuICAgICAgICAgICAgXG4gICAgXG4gICAgICAgICAgICBsZXQgaGlnaFByaW9yaXR5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XG4gICAgICAgICAgICBoaWdoUHJpb3JpdHkuY2xhc3NMaXN0LmFkZCgnaGlnaFByaW9yaXR5Jyk7XG4gICAgICAgICAgICBoaWdoUHJpb3JpdHkudmFsdWUgPSAnSGlnaCBQcmlvcml0eSc7XG4gICAgICAgICAgICBoaWdoUHJpb3JpdHkudGV4dENvbnRlbnQgPSAnSGlnaCBQcmlvcml0eSdcbiAgICAgICAgICAgIHRhc2tQcmlvcml0eS5hcHBlbmRDaGlsZChoaWdoUHJpb3JpdHkpO1xuICAgIFxuICAgICAgICAgICAgXG4gICAgXG4gICAgICAgICAgICBsZXQgdGFza0R1ZURhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpXG4gICAgICAgICAgICB0YXNrRHVlRGF0ZS5jbGFzc0xpc3QuYWRkKCdzaG93RHVlRGF0ZScpO1xuICAgICAgICAgICAgdGFza0R1ZURhdGUudHlwZSA9ICdEYXRlJztcbiAgICAgICAgICAgIHRhc2tEdWVEYXRlLnZhbHVlID0gZS5kdWVEYXRlO1xuICAgICAgICAgICAgdGFzay5hcHBlbmRDaGlsZCh0YXNrRHVlRGF0ZSk7XG4gICAgXG4gICAgICAgICAgICBsZXQgdGFza0VkaXRBbmRTdWJtaXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgICAgIHRhc2tFZGl0QW5kU3VibWl0LmNsYXNzTGlzdC5hZGQoJ3Rhc2tFZGl0QW5kU3VibWl0Jyk7XG4gICAgICAgICAgICB0YXNrRWRpdEFuZFN1Ym1pdC50ZXh0Q29udGVudCA9ICdTdWJtaXQnO1xuICAgICAgICAgICAgdGFzay5hcHBlbmRDaGlsZCh0YXNrRWRpdEFuZFN1Ym1pdCk7XG5cbiAgICAgICAgICAgIHRhc2tUaXRsZS5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIChrKT0+e1xuICAgICAgICAgICAgICAgIGlmIChrLmtleSA9PSAnRW50ZXInKXtcbiAgICAgICAgICAgICAgICAgICAgZS50aXRsZSA9IHRhc2tUaXRsZS52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgZS5kZXNjcmlwdGlvbiA9IHRhc2tEZXNjcmlwdGlvbi52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmlvcml0eSA9IHRhc2tQcmlvcml0eS52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgZS5kdWVEYXRlID0gdGFza0R1ZURhdGUudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhteVByb2plY3RzKTtcbiAgICAgICAgICAgICAgICAgICAgdGFza1RpdGxlLmJsdXIoKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSk7XG4gICAgXG4gICAgICAgICAgICB0YXNrRGVzY3JpcHRpb24uYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCAoayk9PntcbiAgICAgICAgICAgICAgICBpZiAoay5rZXkgPT0gJ0VudGVyJyl7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBlLnRpdGxlID0gdGFza1RpdGxlLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBlLmRlc2NyaXB0aW9uID0gdGFza0Rlc2NyaXB0aW9uLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBlLnByaW9yaXR5ID0gdGFza1ByaW9yaXR5LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBlLmR1ZURhdGUgPSB0YXNrRHVlRGF0ZS52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG15UHJvamVjdHMpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrRGVzY3JpcHRpb24uYmx1cigpO1xuICAgIFxuICAgICAgICAgICAgICAgIH07XG4gICAgXG4gICAgICAgICAgICB9KVxuICAgIFxuICAgICAgICAgICAgdGFza0VkaXRBbmRTdWJtaXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+e1xuICAgICAgICAgICAgICAgIGUudGl0bGUgPSB0YXNrVGl0bGUudmFsdWU7XG4gICAgICAgICAgICAgICAgZS5kZXNjcmlwdGlvbiA9IHRhc2tEZXNjcmlwdGlvbi52YWx1ZTtcbiAgICAgICAgICAgICAgICBlLnByaW9yaXR5ID0gdGFza1ByaW9yaXR5LnZhbHVlO1xuICAgICAgICAgICAgICAgIGUuZHVlRGF0ZSA9IHRhc2tEdWVEYXRlLnZhbHVlO1xuICAgIFxuICAgICAgICAgICAgICAgIGlmIChlLnByaW9yaXR5ID09ICdIaWdoIFByaW9yaXR5Jyl7XG4gICAgICAgICAgICAgICAgICAgIHRhc2suc3R5bGUuYm9yZGVyQ29sb3IgPSAncmVkJ1xuICAgICAgICAgICAgICAgICAgICBoaWdoUHJpb3JpdHkuc2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5wcmlvcml0eSA9PSAnTG93IFByaW9yaXR5Jyl7XG4gICAgICAgICAgICAgICAgICAgIHRhc2suc3R5bGUuYm9yZGVyQ29sb3IgPSAnZ3JlZW4nXG4gICAgICAgICAgICAgICAgICAgIGxvd1ByaW9yaXR5LnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0YXNrLnN0eWxlLmJvcmRlckNvbG9yID0gJ2JsYWNrJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgXG4gICAgXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codGFza0FycmF5KVxuICAgIFxuICAgIFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIFxuICAgIFxuICAgICAgICAgICAgaWYgKGUucHJpb3JpdHkgPT0gJ0hpZ2ggUHJpb3JpdHknKXtcbiAgICAgICAgICAgICAgICB0YXNrLnN0eWxlLmJvcmRlckNvbG9yID0gJ3JlZCdcbiAgICAgICAgICAgICAgICBoaWdoUHJpb3JpdHkuc2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChlLnByaW9yaXR5ID09ICdMb3cgUHJpb3JpdHknKXtcbiAgICAgICAgICAgICAgICB0YXNrLnN0eWxlLmJvcmRlckNvbG9yID0gJ2dyZWVuJ1xuICAgICAgICAgICAgICAgIGxvd1ByaW9yaXR5LnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGFzay5zdHlsZS5ib3JkZXJDb2xvciA9ICdibGFjaydcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICAgICAgICAgIGxldCB0YXNrRGVsZXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJylcbiAgICAgICAgICAgIHRhc2tEZWxldGUuY2xhc3NMaXN0LmFkZCgndGFza0RlbGV0ZScpO1xuICAgICAgICAgICAgdGFza0RlbGV0ZS50ZXh0Q29udGVudCA9ICdEZWxldGUnO1xuICAgICAgICAgICAgdGFzay5hcHBlbmRDaGlsZCh0YXNrRGVsZXRlKTtcbiAgICAgICAgICAgIHRhc2tEZWxldGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+e1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRhc2tBcnJheS5zcGxpY2UoaSAsIDEpO1xuICAgICAgICAgICAgICAgIHRhc2sucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coaSlcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0YXNrQXJyYXkpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgXG4gICAgXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICBcbiAgICAgICAgfSlcbiAgICB9KVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IGFsbFRhc2tzIiwiaW1wb3J0IGFsbFRhc2tzIGZyb20gJy4vYWxsVGFza3MnXG5cbmxldCBteVByb2plY3RzID0gW107XG5cblxuY2xhc3MgUHJvamVjdCB7XG4gICAgY29uc3RydWN0b3IodGl0bGUsIGluZGV4LCB0YXNrcyl7XG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZVxuICAgICAgICB0aGlzLmluZGV4ID0gaW5kZXhcbiAgICAgICAgdGhpcy50YXNrcyA9IFtdXG4gICAgfVxuXG59XG5cbmNsYXNzIFRhc2sge1xuICAgIGNvbnN0cnVjdG9yKHRpdGxlLCBkZXNjcmlwdGlvbiwgcHJpb3JpdHksIGR1ZURhdGUpe1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICAgICAgdGhpcy5wcmlvcml0eSA9IHByaW9yaXR5O1xuICAgICAgICB0aGlzLmR1ZURhdGUgPSBkdWVEYXRlO1xuICAgIH1cbn1cblxuKGZ1bmN0aW9uIGNyZWF0ZURlZmF1bHRQcm9qZWN0ICgpeyBcbiAgICBjb25zdCBwcm9qZWN0Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3RDb250YWluZXInKTtcbiAgICBcbiAgICBjb25zdCBhZGRQcm9qZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgYWRkUHJvamVjdC50ZXh0Q29udGVudCA9ICdEZWZhdWx0J1xuICAgIHByb2plY3RDb250YWluZXIuYXBwZW5kQ2hpbGQoYWRkUHJvamVjdCk7XG5cbiAgICBcblxuICAgIGNvbnN0IGNvbnRlbnRIZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGVudEhlYWRlcicpO1xuICAgIGNvbnRlbnRIZWFkZXIudGV4dENvbnRlbnQgPSBhZGRQcm9qZWN0LnRleHRDb250ZW50O1xuXG4gICAgY29uc3QgdGFza0J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YXNrQnV0dG9uJyk7XG4gICAgdGFza0J1dHRvbi5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2liaWxlJztcblxuXG5cbiAgICBsZXQgdGl0bGUgPSBhZGRQcm9qZWN0LnRleHRDb250ZW50O1xuICAgIGxldCBkZWZhdWx0UHJvamVjdCA9IG5ldyBQcm9qZWN0KHRpdGxlKTtcbiAgICBteVByb2plY3RzLnB1c2goZGVmYXVsdFByb2plY3QpO1xuXG4gICAgcHJvamVjdENsaWNrKClcblxuICAgIGNvbnNvbGUubG9nKG15UHJvamVjdHMpXG59KSgpO1xuXG4oZnVuY3Rpb24gcHJvamVjdEJ1dHRvbiAoKXtcbiAgICBjb25zdCBwcm9qZWN0Rm9ybUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0Rm9ybUNvbnRhaW5lcicpO1xuICAgIGNvbnN0IHByb2plY3RCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdEJ1dHRvbicpO1xuICAgIGNvbnN0IHByb2plY3ROYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2plY3ROYW1lJyk7XG4gICAgXG4gICAgcHJvamVjdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57XG4gICAgICAgIHByb2plY3ROYW1lLnZhbHVlID0gJyc7XG4gICAgICAgIHByb2plY3RGb3JtQ29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7XG4gICAgICAgIFxuICAgIH0pO1xufSkoKTtcblxuKGZ1bmN0aW9uIHByb2plY3RTdWJtaXQgKCl7XG4gICAgY29uc3Qgc3VibWl0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1Ym1pdFByb2plY3QnKTtcbiAgICBjb25zdCBwcm9qZWN0Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3RDb250YWluZXInKTtcbiAgICBcbiAgICBzdWJtaXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+e1xuICAgICAgICBwcm9qZWN0Q29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xuICAgICAgICBwcm9qZWN0Q29udGFpbmVyLnRleHRDb250ZW50ID0gJ1Byb2plY3RzJ1xuICAgICAgICBjb25zdCBwcm9qZWN0TmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9qZWN0TmFtZScpO1xuICAgICAgICBcblxuICAgICAgICBcblxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIGxldCB0aXRsZSA9IHByb2plY3ROYW1lLnZhbHVlO1xuXG4gICAgICAgIGxldCBwcm9qZWN0T2JqID0gbmV3IFByb2plY3QodGl0bGUpXG4gICAgICAgIG15UHJvamVjdHMucHVzaChwcm9qZWN0T2JqKVxuICAgICAgICBjb25zb2xlLmxvZyhteVByb2plY3RzKVxuXG4gICAgICAgIFxuXG4gICAgICAgIHByb2plY3RDbGljaygpXG5cbiAgICAgICAgY29uc3QgcHJvamVjdEZvcm1Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdEZvcm1Db250YWluZXInKTtcbiAgICAgICAgcHJvamVjdEZvcm1Db250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuICAgICAgICBcbiAgICAgICAgXG4gICAgfSk7XG59KSgpO1xuXG4oZnVuY3Rpb24gcHJvamVjdENhbmNlbCAoKXtcbiAgICBjb25zdCBjYW5jZWxQcm9qZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbmNlbFByb2plY3QnKTtcbiAgICBjb25zdCBwcm9qZWN0Rm9ybUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0Rm9ybUNvbnRhaW5lcicpXG4gICAgY2FuY2VsUHJvamVjdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57XG4gICAgICAgIHByb2plY3RGb3JtQ29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcblxuICAgIH0pO1xufSkoKTtcblxuZnVuY3Rpb24gdGFza0J1dHRvbiAoKXtcblxuICAgIFxuXG4gICAgY29uc3QgdGFza0J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YXNrQnV0dG9uJyk7XG4gICAgdGFza0J1dHRvbi5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnXG4gICAgY29uc3QgdGFza0Zvcm1Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGFza0Zvcm1Db250YWluZXInKTtcbiAgICBcbiAgICB0YXNrQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PiB7XG4gICAgICAgIHRhc2tGb3JtQ29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSdcblxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFza1RpdGxlJykudmFsdWUgPSAnJztcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rhc2tEZXNjcmlwdGlvbicpLnZhbHVlID0gJyc7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YXNrUHJpb3JpdHknKS52YWx1ZSA9ICcnO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFza0R1ZURhdGUnKS52YWx1ZSA9ICcnO1xuXG4gICAgfSlcblxufVxuXG4gICAgICAgIFxuZnVuY3Rpb24gcHJvamVjdENsaWNrICgpe1xuICAgIGNvbnN0IHByb2plY3RDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdENvbnRhaW5lcicpO1xuICAgIGxldCBjb250ZW50SGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRlbnRIZWFkZXInKTtcbiAgICBjb25zdCB0YXNrQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRhc2tDb250YWluZXInKVxuXG4gICAgcHJvamVjdENvbnRhaW5lci5pbm5lckhUTUwgPSAnJ1xuICAgIHByb2plY3RDb250YWluZXIudGV4dENvbnRlbnQgPSAnUHJvamVjdHMnXG5cbiAgICBteVByb2plY3RzLmZvckVhY2goKHByb2osIGkpID0+e1xuICAgICAgICBjb25zdCBwcm9qZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHByb2plY3QuY2xhc3NMaXN0LmFkZCgncHJvamVjdCcpXG4gICAgICAgIFxuICAgICAgICBwcm9qZWN0Q29udGFpbmVyLmFwcGVuZENoaWxkKHByb2plY3QpO1xuXG4gICAgICAgIGNvbnN0IHByb2plY3RUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBwcm9qZWN0VGl0bGUuY2xhc3NMaXN0LmFkZCgncHJvamVjdFRpdGxlJylcbiAgICAgICAgcHJvamVjdFRpdGxlLnRleHRDb250ZW50ID0gcHJvai50aXRsZTtcbiAgICAgICAgcHJvamVjdC5hcHBlbmRDaGlsZChwcm9qZWN0VGl0bGUpO1xuXG5cbiAgICAgICAgbGV0IGRlbGV0ZVByb2plY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKVxuICAgICAgICBkZWxldGVQcm9qZWN0LnNldEF0dHJpYnV0ZSgnaWQnLCAnZGVsZXRlUHJvamVjdCcpXG4gICAgICAgIGRlbGV0ZVByb2plY3QudGV4dENvbnRlbnQgPSAnWCc7XG4gICAgICAgIHByb2plY3QuYXBwZW5kQ2hpbGQoZGVsZXRlUHJvamVjdClcbiAgICAgICAgZGVsZXRlUHJvamVjdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57XG5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBteVByb2plY3RzLnNwbGljZShpLDEpO1xuICAgICAgICAgICAgcHJvamVjdC5yZW1vdmUoKTtcbiAgICAgICAgICAgIHByb2plY3RDbGljaygpXG5cbiAgICAgICAgICAgIGlmIChjb250ZW50SGVhZGVyLnRleHRDb250ZW50ID09IHByb2oudGl0bGUpe1xuICAgICAgICAgICAgICAgIGFsbFRhc2tzKG15UHJvamVjdHMpXG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKG15UHJvamVjdHMpO1xuXG4gICAgICAgIH0pXG5cbiAgICAgICAgcHJvamVjdFRpdGxlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywoKT0+e1xuICAgICAgICAgICAgdGFza0NvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIGNvbnRlbnRIZWFkZXIudGV4dENvbnRlbnQgPSBwcm9qLnRpdGxlO1xuICAgICAgICAgICAgZGlzcGxheVRhc2tzKGkpXG4gICAgICAgICAgICBjcmVhdGVUYXNrKGkpXG4gICAgICAgICAgICB0YXNrQnV0dG9uKClcbiAgICAgICAgXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhteVByb2plY3RzKVxuICAgICAgICAgICAgY29uc29sZS5sb2coaSkgIFxuICAgICAgICB9KVxuXG5cblxuICAgIH0pXG4gICAgXG4gICAgXG4gICAgXG59XG5cbmZ1bmN0aW9uIGRpc3BsYXlUYXNrcyAoaSl7XG5cbiAgICBcbiAgICBjb25zdCB0YXNrQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRhc2tDb250YWluZXInKTtcbiAgICB0YXNrQ29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xuXG4gICAgbGV0IHRhc2tBcnJheSA9IG15UHJvamVjdHMuYXQoaSkudGFza3M7XG4gICAgXG4gICAgdGFza0FycmF5LmZvckVhY2goKGUsIGkpID0+e1xuICAgICAgICBsZXQgdGFzayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0YXNrLmNsYXNzTGlzdC5hZGQoJ3Rhc2snKVxuXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRhc2tDb250YWluZXIuYXBwZW5kQ2hpbGQodGFzaylcblxuICAgICAgICBsZXQgdGFza1RpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgdGFza1RpdGxlLmNsYXNzTGlzdC5hZGQoJ3Rhc2tUaXRsZScpO1xuICAgICAgICB0YXNrVGl0bGUudmFsdWUgPSBlLnRpdGxlO1xuICAgICAgICB0YXNrLmFwcGVuZENoaWxkKHRhc2tUaXRsZSk7XG5cbiAgICAgICAgXG5cbiAgICAgICAgbGV0IHRhc2tEZXNjcmlwdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICAgIHRhc2tEZXNjcmlwdGlvbi5jbGFzc0xpc3QuYWRkKCd0YXNrRGVzY3JpcHRpb24nKVxuICAgICAgICB0YXNrRGVzY3JpcHRpb24udmFsdWUgPSBlLmRlc2NyaXB0aW9uO1xuICAgICAgICB0YXNrLmFwcGVuZENoaWxkKHRhc2tEZXNjcmlwdGlvbik7XG5cbiAgICAgICAgbGV0IHRhc2tQcmlvcml0eSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NlbGVjdCcpO1xuICAgICAgICB0YXNrUHJpb3JpdHkuY2xhc3NMaXN0LmFkZCgndGFza1ByaW9yaXR5JylcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICB0YXNrLmFwcGVuZENoaWxkKHRhc2tQcmlvcml0eSk7XG5cbiAgICAgICAgdGFza1ByaW9yaXR5LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChldnQpPT57XG4gICAgICAgICAgICBpZiAoZXZ0LmN1cnJlbnRUYXJnZXQudmFsdWUgPT0gJ05vIFByaW9yaXR5Jyl7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZXZ0LmN1cnJlbnRUYXJnZXQudmFsdWUgPSBub1ByaW9yaXR5LnZhbHVlO1xuICAgICAgICAgICAgICAgIGUucHJpb3JpdHkgPSBldnQuY3VycmVudFRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICB0YXNrLnN0eWxlLmJvcmRlckNvbG9yID0gJ2JsYWNrJztcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhteVByb2plY3RzKTtcbiAgICAgICAgICAgICAgICBub1ByaW9yaXR5LmJsdXIoKTtcbiAgICAgICAgXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2dC5jdXJyZW50VGFyZ2V0LnZhbHVlID09ICdMb3cgUHJpb3JpdHknKXtcbiAgICAgICAgICAgICAgICBldnQuY3VycmVudFRhcmdldC52YWx1ZSA9IGxvd1ByaW9yaXR5LnZhbHVlO1xuICAgICAgICAgICAgICAgIGUucHJpb3JpdHkgPSBldnQuY3VycmVudFRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICB0YXNrLnN0eWxlLmJvcmRlckNvbG9yID0gJ2dyZWVuJztcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhteVByb2plY3RzKTtcbiAgICAgICAgICAgICAgICBsb3dQcmlvcml0eS5ibHVyKCk7XG5cblxuICAgICAgICAgICAgfSBlbHNlIGlmIChldnQuY3VycmVudFRhcmdldC52YWx1ZSA9PSAnSGlnaCBQcmlvcml0eScpe1xuICAgICAgICAgICAgICAgIGV2dC5jdXJyZW50VGFyZ2V0LnZhbHVlID0gaGlnaFByaW9yaXR5LnZhbHVlO1xuICAgICAgICAgICAgICAgIGUucHJpb3JpdHkgPSBldnQuY3VycmVudFRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICB0YXNrLnN0eWxlLmJvcmRlckNvbG9yID0gJ3JlZCc7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cobXlQcm9qZWN0cyk7XG4gICAgICAgICAgICAgICAgaGlnaFByaW9yaXR5LmJsdXIoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9KVxuXG4gICAgICAgIGxldCBub1ByaW9yaXR5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XG4gICAgICAgIG5vUHJpb3JpdHkuY2xhc3NMaXN0LmFkZCgnbm9Qcmlvcml0eScpO1xuICAgICAgICBub1ByaW9yaXR5LnZhbHVlID0gJ05vIFByaW9yaXR5JztcbiAgICAgICAgbm9Qcmlvcml0eS50ZXh0Q29udGVudCA9ICdObyBQcmlvcml0eSc7XG4gICAgICAgIHRhc2tQcmlvcml0eS5hcHBlbmRDaGlsZChub1ByaW9yaXR5KTtcblxuICAgICAgICBcblxuXG4gICAgICAgIGxldCBsb3dQcmlvcml0eSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xuICAgICAgICBsb3dQcmlvcml0eS5jbGFzc0xpc3QuYWRkKCdsb3dQcmlvcml0eScpO1xuICAgICAgICBsb3dQcmlvcml0eS52YWx1ZSA9ICdMb3cgUHJpb3JpdHknO1xuICAgICAgICBsb3dQcmlvcml0eS50ZXh0Q29udGVudCA9ICdMb3cgUHJpb3JpdHknXG4gICAgICAgIHRhc2tQcmlvcml0eS5hcHBlbmRDaGlsZChsb3dQcmlvcml0eSk7XG5cbiAgICAgICAgXG5cbiAgICAgICAgbGV0IGhpZ2hQcmlvcml0eSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xuICAgICAgICBoaWdoUHJpb3JpdHkuY2xhc3NMaXN0LmFkZCgnaGlnaFByaW9yaXR5Jyk7XG4gICAgICAgIGhpZ2hQcmlvcml0eS52YWx1ZSA9ICdIaWdoIFByaW9yaXR5JztcbiAgICAgICAgaGlnaFByaW9yaXR5LnRleHRDb250ZW50ID0gJ0hpZ2ggUHJpb3JpdHknXG4gICAgICAgIHRhc2tQcmlvcml0eS5hcHBlbmRDaGlsZChoaWdoUHJpb3JpdHkpO1xuXG4gICAgICAgIFxuXG4gICAgICAgIGxldCB0YXNrRHVlRGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0JylcbiAgICAgICAgdGFza0R1ZURhdGUuY2xhc3NMaXN0LmFkZCgnc2hvd0R1ZURhdGUnKTtcbiAgICAgICAgdGFza0R1ZURhdGUudHlwZSA9ICdEYXRlJztcbiAgICAgICAgdGFza0R1ZURhdGUudmFsdWUgPSBlLmR1ZURhdGU7XG4gICAgICAgIHRhc2suYXBwZW5kQ2hpbGQodGFza0R1ZURhdGUpO1xuXG4gICAgICAgIHRhc2tEdWVEYXRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChkYXRlKT0+e1xuICAgICAgICAgICAgZGF0ZS5jdXJyZW50VGFyZ2V0LnZhbHVlID0gdGFza0R1ZURhdGUudmFsdWU7XG4gICAgICAgICAgICBlLmR1ZURhdGUgPSBkYXRlLmN1cnJlbnRUYXJnZXQudmFsdWU7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlKVxuXG4gICAgICAgIH0pXG5cbiAgICAgICAgXG5cbiAgICAgICAgXG5cbiAgICAgICAgdGFza1RpdGxlLmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJywgKGspPT57XG4gICAgICAgICAgICBpZiAoay5rZXkgPT0gJ0VudGVyJyl7XG4gICAgICAgICAgICAgICAgZS50aXRsZSA9IHRhc2tUaXRsZS52YWx1ZTtcbiAgICAgICAgICAgICAgICBlLmRlc2NyaXB0aW9uID0gdGFza0Rlc2NyaXB0aW9uLnZhbHVlO1xuICAgICAgICAgICAgICAgIGUucHJpb3JpdHkgPSB0YXNrUHJpb3JpdHkudmFsdWU7XG4gICAgICAgICAgICAgICAgZS5kdWVEYXRlID0gdGFza0R1ZURhdGUudmFsdWU7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cobXlQcm9qZWN0cyk7XG4gICAgICAgICAgICAgICAgdGFza1RpdGxlLmJsdXIoKTtcblxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGFza0Rlc2NyaXB0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJywgKGspPT57XG4gICAgICAgICAgICBpZiAoay5rZXkgPT0gJ0VudGVyJyl7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZS50aXRsZSA9IHRhc2tUaXRsZS52YWx1ZTtcbiAgICAgICAgICAgICAgICBlLmRlc2NyaXB0aW9uID0gdGFza0Rlc2NyaXB0aW9uLnZhbHVlO1xuICAgICAgICAgICAgICAgIGUucHJpb3JpdHkgPSB0YXNrUHJpb3JpdHkudmFsdWU7XG4gICAgICAgICAgICAgICAgZS5kdWVEYXRlID0gdGFza0R1ZURhdGUudmFsdWU7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cobXlQcm9qZWN0cyk7XG4gICAgICAgICAgICAgICAgdGFza0Rlc2NyaXB0aW9uLmJsdXIoKTtcblxuICAgICAgICAgICAgfTtcblxuICAgICAgICB9KVxuXG4gICAgICAgIFxuICAgICAgICBcblxuICAgICAgICBpZiAoZS5wcmlvcml0eSA9PSAnSGlnaCBQcmlvcml0eScpe1xuICAgICAgICAgICAgdGFzay5zdHlsZS5ib3JkZXJDb2xvciA9ICdyZWQnXG4gICAgICAgICAgICBoaWdoUHJpb3JpdHkuc2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgICB9IGVsc2UgaWYgKGUucHJpb3JpdHkgPT0gJ0xvdyBQcmlvcml0eScpe1xuICAgICAgICAgICAgdGFzay5zdHlsZS5ib3JkZXJDb2xvciA9ICdncmVlbidcbiAgICAgICAgICAgIGxvd1ByaW9yaXR5LnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRhc2suc3R5bGUuYm9yZGVyQ29sb3IgPSAnYmxhY2snXG4gICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcblxuXG5cbiAgICAgICAgbGV0IHRhc2tEZWxldGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKVxuICAgICAgICB0YXNrRGVsZXRlLmNsYXNzTGlzdC5hZGQoJ3Rhc2tEZWxldGUnKTtcbiAgICAgICAgdGFza0RlbGV0ZS50ZXh0Q29udGVudCA9ICdYJztcbiAgICAgICAgdGFzay5hcHBlbmRDaGlsZCh0YXNrRGVsZXRlKTtcbiAgICAgICAgdGFza0RlbGV0ZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRhc2tBcnJheS5zcGxpY2UoaSAsIDEpO1xuICAgICAgICAgICAgdGFzay5yZW1vdmUoKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGkpXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRhc2tBcnJheSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG5cbiAgICAgICAgfSlcblxuXG5cblxuICAgIH0pXG5cbn1cblxuXG5cblxuZnVuY3Rpb24gY3JlYXRlVGFzayAoaSl7XG5cbiAgICBjb25zdCB0YXNrRm9ybUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50YXNrRm9ybUNvbnRhaW5lcicpO1xuICAgIHRhc2tGb3JtQ29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xuXG4gICAgY29uc3QgdGFza0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50YXNrQ29udGFpbmVyJylcblxuICAgIFxuXG4gICAgXG5cbiAgICBjb25zdCB0YXNrVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgIHRhc2tUaXRsZS5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3Rhc2tUaXRsZScpXG4gICAgdGFza1RpdGxlLnBsYWNlaG9sZGVyID0gJ3RpdGxlJztcbiAgICB0YXNrRm9ybUNvbnRhaW5lci5hcHBlbmRDaGlsZCh0YXNrVGl0bGUpO1xuXG4gICAgY29uc3QgdGFza0Rlc2NyaXB0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICB0YXNrRGVzY3JpcHRpb24uc2V0QXR0cmlidXRlKCdpZCcsICd0YXNrRGVzY3JpcHRpb24nKTtcbiAgICB0YXNrRGVzY3JpcHRpb24ucGxhY2Vob2xkZXIgPSAnZGVzY3JpcHRpb24nXG4gICAgdGFza0Zvcm1Db250YWluZXIuYXBwZW5kQ2hpbGQodGFza0Rlc2NyaXB0aW9uKTtcblxuICAgIGNvbnN0IHRhc2tQcmlvcml0eSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NlbGVjdCcpO1xuICAgIHRhc2tQcmlvcml0eS5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3Rhc2tQcmlvcml0eScpO1xuICAgIHRhc2tGb3JtQ29udGFpbmVyLmFwcGVuZENoaWxkKHRhc2tQcmlvcml0eSk7XG5cbiAgICBjb25zdCBub1ByaW9yaXR5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XG4gICAgbm9Qcmlvcml0eS52YWx1ZSA9ICdObyBQcmlvcml0eSc7XG4gICAgbm9Qcmlvcml0eS50ZXh0Q29udGVudCA9ICdObyBQcmlvcml0eSc7XG4gICAgdGFza1ByaW9yaXR5LmFwcGVuZENoaWxkKG5vUHJpb3JpdHkpO1xuXG4gICAgXG4gICAgXG5cbiAgICBjb25zdCBoaWdoUHJpb3JpdHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcbiAgICBoaWdoUHJpb3JpdHkudmFsdWUgPSAnSGlnaCBQcmlvcml0eSdcbiAgICBoaWdoUHJpb3JpdHkudGV4dENvbnRlbnQgPSAnSGlnaCBQcmlvcml0eSdcbiAgICB0YXNrUHJpb3JpdHkuYXBwZW5kQ2hpbGQoaGlnaFByaW9yaXR5KTtcblxuICAgIGNvbnN0IGxvd1ByaW9yaXR5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XG4gICAgbG93UHJpb3JpdHkudmFsdWUgPSAnTG93IFByaW9yaXR5J1xuICAgIGxvd1ByaW9yaXR5LnRleHRDb250ZW50ID0gJ0xvdyBQcmlvcml0eSdcbiAgICB0YXNrUHJpb3JpdHkuYXBwZW5kQ2hpbGQobG93UHJpb3JpdHkpO1xuXG4gICAgY29uc3QgdGFza0R1ZURhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgIHRhc2tEdWVEYXRlLnNldEF0dHJpYnV0ZSgnaWQnLCAndGFza0R1ZURhdGUnKVxuICAgIHRhc2tEdWVEYXRlLnR5cGUgPSAnRGF0ZSc7XG4gICAgdGFza0R1ZURhdGUudGV4dENvbnRlbnQgPSAnRHVlIERhdGUnO1xuICAgIHRhc2tGb3JtQ29udGFpbmVyLmFwcGVuZENoaWxkKHRhc2tEdWVEYXRlKTtcblxuICAgIGNvbnN0IHN1Ym1pdFRhc2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBzdWJtaXRUYXNrLnNldEF0dHJpYnV0ZSgnaWQnLCAnc3VibWl0VGFzaycpO1xuICAgIHN1Ym1pdFRhc2sudGV4dENvbnRlbnQgPSAnU3VibWl0J1xuICAgIHRhc2tGb3JtQ29udGFpbmVyLmFwcGVuZENoaWxkKHN1Ym1pdFRhc2spO1xuXG4gICAgY29uc3QgY2FuY2VsVGFzayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIGNhbmNlbFRhc2suc2V0QXR0cmlidXRlKCdpZCcsICdjYW5jZWxUYXNrJyk7XG4gICAgY2FuY2VsVGFzay50ZXh0Q29udGVudCA9ICdDYW5jZWwnXG4gICAgdGFza0Zvcm1Db250YWluZXIuYXBwZW5kQ2hpbGQoY2FuY2VsVGFzayk7XG5cbiAgICBcblxuICAgIHN1Ym1pdFRhc2suYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+e1xuICAgICAgICBcblxuICAgICAgICBcblxuICAgICAgICBsZXQgdGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFza1RpdGxlJykudmFsdWU7XG4gICAgICAgIGxldCBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YXNrRGVzY3JpcHRpb24nKS52YWx1ZTtcbiAgICAgICAgbGV0IHByaW9yaXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rhc2tQcmlvcml0eScpLnZhbHVlO1xuICAgICAgICBsZXQgZHVlRGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YXNrRHVlRGF0ZScpLnZhbHVlO1xuXG4gICAgICAgIFxuXG4gICAgICAgIGxldCB0YXNrT2JqID0gbmV3IFRhc2sgKHRpdGxlLCBkZXNjcmlwdGlvbiwgcHJpb3JpdHksIGR1ZURhdGUpXG4gICAgICAgIG15UHJvamVjdHMuYXQoaSkudGFza3MucHVzaCh0YXNrT2JqKTtcblxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKG15UHJvamVjdHMpXG4gICAgICAgIGNvbnNvbGUubG9nKHByaW9yaXR5KVxuXG4gICAgICAgIGRpc3BsYXlUYXNrcyhpKVxuXG4gICAgICAgIFxuXG4gICAgICAgIGxldCB0YXNrRm9ybUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50YXNrRm9ybUNvbnRhaW5lcicpO1xuICAgICAgICB0YXNrRm9ybUNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG4gICAgICAgIFxuICAgICAgICBcblxuICAgIH0pXG5cbiAgICBjYW5jZWxUYXNrLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PntcbiAgICAgICAgdGFza0Zvcm1Db250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuXG4gICAgfSlcblxuICAgICAgICBcblxufVxuXG5cblxuXG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hbGxUYXNrcycpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PntcbiAgICBhbGxUYXNrcyhteVByb2plY3RzKVxufSlcblxuICAgIFxuXG4gICAgICAgIFxuXG4gICAgICAgIFxuXG4gICAgICAgIFxuXG4gICAgICAgIFxuICAgICAgICAgICAgXG5cblxuXG5cblxuXG5cblxuXG5cblxuICAgIFxuXG5cblxuXG4gICAgICAgIFxuICAgICAgICBcblxuXG5cbiAgICAgICAgICAgIFxuXG5cbiAgICAgICAgICAgIFxuXG4gICAgICAgICAgICBcblxuXG5cblxuXG5cblxuXG5cblxuXG4gICAgXG5cblxuXG4iXSwibmFtZXMiOlsibXlQcm9qZWN0cyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJzdHlsZSIsInZpc2liaWxpdHkiLCJxdWVyeVNlbGVjdG9yIiwidGV4dENvbnRlbnQiLCJ0YXNrQ29udGFpbmVyIiwiaW5uZXJIVE1MIiwiZm9yRWFjaCIsImUiLCJpIiwidGFza0FycmF5IiwidGFza3MiLCJjb25zb2xlIiwibG9nIiwidGFzayIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJhcHBlbmRDaGlsZCIsInRhc2tUaXRsZSIsInZhbHVlIiwidGl0bGUiLCJ0YXNrRGVzY3JpcHRpb24iLCJkZXNjcmlwdGlvbiIsInRhc2tQcmlvcml0eSIsInByaW9yaXR5IiwibG93UHJpb3JpdHkiLCJoaWdoUHJpb3JpdHkiLCJ0YXNrRHVlRGF0ZSIsInR5cGUiLCJkdWVEYXRlIiwidGFza0VkaXRBbmRTdWJtaXQiLCJhZGRFdmVudExpc3RlbmVyIiwiayIsImtleSIsImJsdXIiLCJib3JkZXJDb2xvciIsInNlbGVjdGVkIiwidGFza0RlbGV0ZSIsInNwbGljZSIsInJlbW92ZSIsIlByb2plY3QiLCJjb25zdHJ1Y3RvciIsImluZGV4IiwidGhpcyIsIlRhc2siLCJwcm9qZWN0Q2xpY2siLCJwcm9qZWN0Q29udGFpbmVyIiwiY29udGVudEhlYWRlciIsInByb2oiLCJwcm9qZWN0IiwicHJvamVjdFRpdGxlIiwiZGVsZXRlUHJvamVjdCIsInNldEF0dHJpYnV0ZSIsImRpc3BsYXlUYXNrcyIsInRhc2tGb3JtQ29udGFpbmVyIiwicGxhY2Vob2xkZXIiLCJub1ByaW9yaXR5Iiwic3VibWl0VGFzayIsImNhbmNlbFRhc2siLCJ0YXNrT2JqIiwiYXQiLCJwdXNoIiwiY3JlYXRlVGFzayIsInRhc2tCdXR0b24iLCJldnQiLCJjdXJyZW50VGFyZ2V0IiwiZGF0ZSIsImFkZFByb2plY3QiLCJkZWZhdWx0UHJvamVjdCIsInByb2plY3RGb3JtQ29udGFpbmVyIiwicHJvamVjdEJ1dHRvbiIsInByb2plY3ROYW1lIiwic3VibWl0IiwicHJvamVjdE9iaiIsImNhbmNlbFByb2plY3QiXSwic291cmNlUm9vdCI6IiJ9