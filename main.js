(()=>{let e=[];class t{constructor(e,t,n){this.title=e,this.index=t,this.tasks=[]}}class n{constructor(e,t,n,o){this.title=e,this.description=t,this.priority=n,this.dueDate=o}}function o(){const t=document.querySelector(".projectContainer");let o=document.querySelector(".contentHeader");const l=document.querySelector(".taskContainer");Array.from(t.children).forEach(((t,r)=>{if(0==t.children.length){let n=document.createElement("button");n.setAttribute("id","deleteProject"),n.textContent="X",t.appendChild(n),n.addEventListener("click",(()=>{e.splice(r,1),t.remove(),console.log(e)}))}t.addEventListener("click",(()=>{l.innerHTML="",o.textContent=`${e[r].title}`,i(r),function(t){const o=document.querySelector(".taskFormContainer");o.innerHTML="",document.querySelector(".taskContainer");const l=document.createElement("input");l.setAttribute("id","taskTitle"),l.placeholder="title",o.appendChild(l);const r=document.createElement("input");r.setAttribute("id","taskDescription"),r.placeholder="description",o.appendChild(r);const d=document.createElement("select");d.setAttribute("id","taskPriority"),o.appendChild(d);const c=document.createElement("option");c.value="High Priority",c.textContent="High Priority",d.appendChild(c);const s=document.createElement("option");s.value="Low Priority",s.textContent="Low Priority",d.appendChild(s);const a=document.createElement("input");a.setAttribute("id","taskDueDate"),a.type="Date",a.textContent="Due Date",o.appendChild(a);const u=document.createElement("button");u.setAttribute("id","submitTask"),u.textContent="Submit",o.appendChild(u);const p=document.createElement("button");p.setAttribute("id","cancelTask"),p.textContent="Cancel",o.appendChild(p),u.addEventListener("click",(()=>{let o=document.getElementById("taskTitle").value,l=document.getElementById("taskDescription").value,r=document.getElementById("taskPriority").value,d=document.getElementById("taskDueDate").value,c=new n(o,l,r,d);e.at(t).tasks.push(c),console.log(e),console.log(r),i(t),document.querySelector(".taskFormContainer").style.visibility="hidden"})),p.addEventListener("click",(()=>{o.style.visibility="hidden"}))}(r),function(){const e=document.getElementById("taskButton");e.style.visibility="visible";const t=document.querySelector(".taskFormContainer");e.addEventListener("click",(()=>{t.style.visibility="visible",document.getElementById("taskTitle").value="",document.getElementById("taskDescription").value="",document.getElementById("taskPriority").value="",document.getElementById("taskDueDate").value=""}))}(),console.log(e),console.log(r)}))}))}function i(t){const n=document.querySelector(".taskContainer");n.innerHTML="";let o=e.at(t).tasks;o.forEach(((t,i)=>{let l=document.createElement("div");l.classList.add("task"),n.appendChild(l);let r=document.createElement("input");r.classList.add("taskTitle"),r.value=t.title,l.appendChild(r);let d=document.createElement("input");d.classList.add("taskDescription"),d.value=t.description,l.appendChild(d);let c=document.createElement("select");c.classList.add("taskPriority"),c.textContent=t.priority,l.appendChild(c);let s=document.createElement("option");s.classList.add("lowPriority"),s.value="Low Priority",s.textContent="Low Priority",c.appendChild(s);let a=document.createElement("option");a.classList.add("highPriority"),a.value="High Priority",a.textContent="High Priority",c.appendChild(a);let u=document.createElement("input");u.classList.add("showDueDate"),u.type="Date",u.value=t.dueDate,l.appendChild(u);let p=document.createElement("button");p.classList.add("taskEditAndSubmit"),p.textContent="Submit",l.appendChild(p),r.addEventListener("keypress",(n=>{"Enter"==n.key&&(t.title=r.value,t.description=d.value,t.priority=c.value,t.dueDate=u.value,console.log(e),r.blur())})),d.addEventListener("keypress",(n=>{"Enter"==n.key&&(t.title=r.value,t.description=d.value,t.priority=c.value,t.dueDate=u.value,console.log(e),d.blur())})),p.addEventListener("click",(()=>{t.title=r.value,t.description=d.value,t.priority=c.value,t.dueDate=u.value,"High Priority"==t.priority?(l.style.borderColor="red",a.selected=!0):"Low Priority"==t.priority?(l.style.borderColor="green",s.selected=!0):l.style.borderColor="black",console.log(o)})),"High Priority"==t.priority?(l.style.borderColor="red",a.selected=!0):"Low Priority"==t.priority?(l.style.borderColor="green",s.selected=!0):l.style.borderColor="black";let m=document.createElement("button");m.classList.add("taskDelete"),m.textContent="Delete",l.appendChild(m),m.addEventListener("click",(()=>{o.splice(i,1),l.remove(),console.log(i),console.log(t),console.log(o)}))}))}!function(){const n=document.querySelector(".projectContainer"),i=document.createElement("div");i.textContent="Default",n.appendChild(i),document.querySelector(".contentHeader").textContent=i.textContent,document.getElementById("taskButton").style.visibility="visibile";let l=i.textContent,r=new t(l);e.push(r),o(),console.log(e)}(),function(){const e=document.querySelector(".projectFormContainer"),t=document.querySelector(".projectButton"),n=document.getElementById("projectName");t.addEventListener("click",(()=>{n.value="",e.style.visibility="visible"}))}(),function(){const n=document.getElementById("submitProject"),i=document.querySelector(".projectContainer");n.addEventListener("click",(()=>{const n=document.getElementById("projectName"),l=document.createElement("div");l.classList.add("project"),i.appendChild(l),l.textContent=n.value;let r=l.textContent,d=new t(r);e.push(d),console.log(e),o(),document.querySelector(".projectFormContainer").style.visibility="hidden"}))}(),function(){const e=document.getElementById("cancelProject"),t=document.querySelector(".projectFormContainer");e.addEventListener("click",(()=>{t.style.visibility="hidden"}))}(),document.querySelector(".allTasks").addEventListener("click",(()=>{document.getElementById("taskButton").style.visibility="hidden",document.querySelector(".taskFormContainer").style.visibility="hidden",document.querySelector(".contentHeader").textContent="All";const t=document.querySelector(".taskContainer");t.innerHTML="",e.forEach(((n,o)=>{let i=n.tasks;i.forEach(((n,o)=>{console.log(n);let l=document.createElement("div");l.classList.add("task"),t.appendChild(l);let r=document.createElement("input");r.classList.add("taskTitle"),r.value=n.title,l.appendChild(r);let d=document.createElement("input");d.classList.add("taskDescription"),d.value=n.description,l.appendChild(d);let c=document.createElement("select");c.classList.add("taskPriority"),c.textContent=n.priority,l.appendChild(c);let s=document.createElement("option");s.classList.add("lowPriority"),s.value="Low Priority",s.textContent="Low Priority",c.appendChild(s);let a=document.createElement("option");a.classList.add("highPriority"),a.value="High Priority",a.textContent="High Priority",c.appendChild(a);let u=document.createElement("input");u.classList.add("showDueDate"),u.type="Date",u.value=n.dueDate,l.appendChild(u);let p=document.createElement("button");p.classList.add("taskEditAndSubmit"),p.textContent="Submit",l.appendChild(p),r.addEventListener("keypress",(t=>{"Enter"==t.key&&(n.title=r.value,n.description=d.value,n.priority=c.value,n.dueDate=u.value,console.log(e),r.blur())})),d.addEventListener("keypress",(t=>{"Enter"==t.key&&(n.title=r.value,n.description=d.value,n.priority=c.value,n.dueDate=u.value,console.log(e),d.blur())})),p.addEventListener("click",(()=>{n.title=r.value,n.description=d.value,n.priority=c.value,n.dueDate=u.value,"High Priority"==n.priority?(l.style.borderColor="red",a.selected=!0):"Low Priority"==n.priority?(l.style.borderColor="green",s.selected=!0):l.style.borderColor="black",console.log(i)})),"High Priority"==n.priority?(l.style.borderColor="red",a.selected=!0):"Low Priority"==n.priority?(l.style.borderColor="green",s.selected=!0):l.style.borderColor="black";let m=document.createElement("button");m.classList.add("taskDelete"),m.textContent="Delete",l.appendChild(m),m.addEventListener("click",(()=>{i.splice(o,1),l.remove(),console.log(o),console.log(n),console.log(i)}))}))}))}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixFQUFZdUIsVUFBVyxHQUV2QlIsRUFBS04sTUFBTWEsWUFBYyxRQUk3QmpDLFFBQVFDLElBQUl1QixFQUFTLElBTVAsaUJBQWRDLEVBQUVoRCxVQUNGaUQsRUFBS04sTUFBTWEsWUFBYyxNQUN6QnhCLEVBQWF5QixVQUFXLEdBQ0gsZ0JBQWRULEVBQUVoRCxVQUNUaUQsRUFBS04sTUFBTWEsWUFBYyxRQUN6QnRCLEVBQVl1QixVQUFXLEdBRXZCUixFQUFLTixNQUFNYSxZQUFjLFFBUTdCLElBQUlFLEVBQWF0RCxTQUFTWSxjQUFjLFVBQ3hDMEMsRUFBV1IsVUFBVUMsSUFBSSxjQUN6Qk8sRUFBV3hDLFlBQWMsU0FDekIrQixFQUFLOUIsWUFBWXVDLEdBQ2pCQSxFQUFXdEMsaUJBQWlCLFNBQVMsS0FFakMyQixFQUFVMUIsT0FBT1IsRUFBSSxHQUNyQm9DLEVBQUszQixTQUNMQyxRQUFRQyxJQUFJWCxHQUNaVSxRQUFRQyxJQUFJd0IsR0FDWnpCLFFBQVFDLElBQUl1QixFQUFTLEdBSXhCLEdBR0osR0FDSixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgbXlQcm9qZWN0cyA9IFtdO1xuXG5cbmNsYXNzIFByb2plY3Qge1xuICAgIGNvbnN0cnVjdG9yKHRpdGxlLCBpbmRleCwgdGFza3Mpe1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGVcbiAgICAgICAgdGhpcy5pbmRleCA9IGluZGV4XG4gICAgICAgIHRoaXMudGFza3MgPSBbXVxuICAgIH1cblxufVxuXG5jbGFzcyBUYXNrIHtcbiAgICBjb25zdHJ1Y3Rvcih0aXRsZSwgZGVzY3JpcHRpb24sIHByaW9yaXR5LCBkdWVEYXRlKXtcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgICAgIHRoaXMucHJpb3JpdHkgPSBwcmlvcml0eTtcbiAgICAgICAgdGhpcy5kdWVEYXRlID0gZHVlRGF0ZTtcbiAgICB9XG59XG5cbihmdW5jdGlvbiBjcmVhdGVEZWZhdWx0UHJvamVjdCAoKXsgXG4gICAgY29uc3QgcHJvamVjdENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0Q29udGFpbmVyJyk7XG4gICAgXG4gICAgY29uc3QgYWRkUHJvamVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGFkZFByb2plY3QudGV4dENvbnRlbnQgPSAnRGVmYXVsdCdcbiAgICBwcm9qZWN0Q29udGFpbmVyLmFwcGVuZENoaWxkKGFkZFByb2plY3QpO1xuXG4gICAgXG5cbiAgICBjb25zdCBjb250ZW50SGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRlbnRIZWFkZXInKTtcbiAgICBjb250ZW50SGVhZGVyLnRleHRDb250ZW50ID0gYWRkUHJvamVjdC50ZXh0Q29udGVudDtcblxuICAgIGNvbnN0IHRhc2tCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFza0J1dHRvbicpO1xuICAgIHRhc2tCdXR0b24uc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmlsZSc7XG5cblxuXG4gICAgbGV0IHRpdGxlID0gYWRkUHJvamVjdC50ZXh0Q29udGVudDtcbiAgICBsZXQgZGVmYXVsdFByb2plY3QgPSBuZXcgUHJvamVjdCh0aXRsZSk7XG4gICAgbXlQcm9qZWN0cy5wdXNoKGRlZmF1bHRQcm9qZWN0KTtcblxuICAgIHByb2plY3RDbGljaygpXG5cbiAgICBjb25zb2xlLmxvZyhteVByb2plY3RzKVxufSkoKTtcblxuKGZ1bmN0aW9uIHByb2plY3RCdXR0b24gKCl7XG4gICAgY29uc3QgcHJvamVjdEZvcm1Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdEZvcm1Db250YWluZXInKTtcbiAgICBjb25zdCBwcm9qZWN0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3RCdXR0b24nKTtcbiAgICBjb25zdCBwcm9qZWN0TmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9qZWN0TmFtZScpO1xuICAgIFxuICAgIHByb2plY3RCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+e1xuICAgICAgICBwcm9qZWN0TmFtZS52YWx1ZSA9ICcnO1xuICAgICAgICBwcm9qZWN0Rm9ybUNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xuICAgICAgICBcbiAgICB9KTtcbn0pKCk7XG5cbihmdW5jdGlvbiBwcm9qZWN0U3VibWl0ICgpe1xuICAgIGNvbnN0IHN1Ym1pdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdWJtaXRQcm9qZWN0Jyk7XG4gICAgY29uc3QgcHJvamVjdENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0Q29udGFpbmVyJyk7XG4gICAgc3VibWl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PntcbiAgICAgICAgY29uc3QgcHJvamVjdE5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvamVjdE5hbWUnKTtcbiAgICAgICAgY29uc3QgYWRkUHJvamVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBhZGRQcm9qZWN0LmNsYXNzTGlzdC5hZGQoJ3Byb2plY3QnKTtcblxuICAgICAgICBcbiAgICAgICAgXG5cblxuICAgICAgICBcblxuICAgICAgICBcbiAgICAgICAgXG5cbiAgICAgICAgXG5cbiAgICAgICAgcHJvamVjdENvbnRhaW5lci5hcHBlbmRDaGlsZChhZGRQcm9qZWN0KTtcblxuICAgICAgICBhZGRQcm9qZWN0LnRleHRDb250ZW50ID0gcHJvamVjdE5hbWUudmFsdWU7XG4gICAgICAgIFxuICAgICAgICBsZXQgdGl0bGUgPSBhZGRQcm9qZWN0LnRleHRDb250ZW50O1xuXG4gICAgICAgIGxldCBwcm9qZWN0T2JqID0gbmV3IFByb2plY3QodGl0bGUpXG4gICAgICAgIG15UHJvamVjdHMucHVzaChwcm9qZWN0T2JqKVxuICAgICAgICBjb25zb2xlLmxvZyhteVByb2plY3RzKVxuXG4gICAgICAgIHByb2plY3RDbGljaygpXG5cbiAgICAgICAgY29uc3QgcHJvamVjdEZvcm1Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdEZvcm1Db250YWluZXInKTtcbiAgICAgICAgcHJvamVjdEZvcm1Db250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuXG5cblxuICAgIH0pO1xufSkoKTtcblxuKGZ1bmN0aW9uIHByb2plY3RDYW5jZWwgKCl7XG4gICAgY29uc3QgY2FuY2VsUHJvamVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW5jZWxQcm9qZWN0Jyk7XG4gICAgY29uc3QgcHJvamVjdEZvcm1Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdEZvcm1Db250YWluZXInKVxuICAgIGNhbmNlbFByb2plY3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+e1xuICAgICAgICBwcm9qZWN0Rm9ybUNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG5cbiAgICB9KTtcbn0pKCk7XG5cbmZ1bmN0aW9uIHRhc2tCdXR0b24gKCl7XG5cbiAgICBcblxuICAgIGNvbnN0IHRhc2tCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFza0J1dHRvbicpO1xuICAgIHRhc2tCdXR0b24uc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJ1xuICAgIGNvbnN0IHRhc2tGb3JtQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRhc2tGb3JtQ29udGFpbmVyJyk7XG4gICAgXG4gICAgdGFza0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT4ge1xuICAgICAgICB0YXNrRm9ybUNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnXG5cbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rhc2tUaXRsZScpLnZhbHVlID0gJyc7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YXNrRGVzY3JpcHRpb24nKS52YWx1ZSA9ICcnO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFza1ByaW9yaXR5JykudmFsdWUgPSAnJztcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rhc2tEdWVEYXRlJykudmFsdWUgPSAnJztcblxuICAgIH0pXG5cbn1cblxuICAgICAgICBcbmZ1bmN0aW9uIHByb2plY3RDbGljayAoKXtcbiAgICBjb25zdCBwcm9qZWN0Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3RDb250YWluZXInKTtcbiAgICBsZXQgY29udGVudEhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50SGVhZGVyJyk7XG4gICAgY29uc3QgdGFza0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50YXNrQ29udGFpbmVyJylcbiAgICBBcnJheS5mcm9tKHByb2plY3RDb250YWluZXIuY2hpbGRyZW4pLmZvckVhY2goKHByb2plY3QsIGkpID0+e1xuXG4gICAgICAgIFxuICAgICAgICBpZiAocHJvamVjdC5jaGlsZHJlbi5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgbGV0IGRlbGV0ZVByb2plY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKVxuICAgICAgICAgICAgZGVsZXRlUHJvamVjdC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2RlbGV0ZVByb2plY3QnKVxuICAgICAgICAgICAgZGVsZXRlUHJvamVjdC50ZXh0Q29udGVudCA9ICdYJztcbiAgICAgICAgICAgIHByb2plY3QuYXBwZW5kQ2hpbGQoZGVsZXRlUHJvamVjdClcbiAgICAgICAgICAgIGRlbGV0ZVByb2plY3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+e1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIG15UHJvamVjdHMuc3BsaWNlKGksMSk7XG4gICAgICAgICAgICAgICAgcHJvamVjdC5yZW1vdmUoKTtcblxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG15UHJvamVjdHMpO1xuICAgIFxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgXG5cbiAgICAgICAgICAgIFxuXG4gICAgICAgICAgICBcblxuICAgICAgICB9XG4gICAgICAgIFxuXG4gICAgICAgIFxuXG4gICAgICAgIFxuICAgICAgICBcblxuICAgICAgICBcblxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBwcm9qZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywoKT0+e1xuICAgICAgICAgICAgdGFza0NvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIGNvbnRlbnRIZWFkZXIudGV4dENvbnRlbnQgPSBgJHtteVByb2plY3RzW2ldLnRpdGxlfWA7XG4gICAgICAgICAgICBkaXNwbGF5VGFza3MoaSlcbiAgICAgICAgICAgIGNyZWF0ZVRhc2soaSlcbiAgICAgICAgICAgIHRhc2tCdXR0b24oKVxuICAgICAgICAgICAgXG5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc29sZS5sb2cobXlQcm9qZWN0cylcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGkpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICB9KVxuXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9KVxufVxuXG5mdW5jdGlvbiBkaXNwbGF5VGFza3MgKGkpe1xuXG4gICAgXG4gICAgY29uc3QgdGFza0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50YXNrQ29udGFpbmVyJyk7XG4gICAgdGFza0NvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcblxuICAgIGxldCB0YXNrQXJyYXkgPSBteVByb2plY3RzLmF0KGkpLnRhc2tzO1xuICAgIFxuICAgIHRhc2tBcnJheS5mb3JFYWNoKChlLCBpKSA9PntcbiAgICAgICAgbGV0IHRhc2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGFzay5jbGFzc0xpc3QuYWRkKCd0YXNrJylcblxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICB0YXNrQ29udGFpbmVyLmFwcGVuZENoaWxkKHRhc2spXG5cbiAgICAgICAgbGV0IHRhc2tUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICAgIHRhc2tUaXRsZS5jbGFzc0xpc3QuYWRkKCd0YXNrVGl0bGUnKTtcbiAgICAgICAgdGFza1RpdGxlLnZhbHVlID0gZS50aXRsZTtcbiAgICAgICAgdGFzay5hcHBlbmRDaGlsZCh0YXNrVGl0bGUpO1xuXG4gICAgICAgIFxuXG4gICAgICAgIGxldCB0YXNrRGVzY3JpcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICB0YXNrRGVzY3JpcHRpb24uY2xhc3NMaXN0LmFkZCgndGFza0Rlc2NyaXB0aW9uJylcbiAgICAgICAgdGFza0Rlc2NyaXB0aW9uLnZhbHVlID0gZS5kZXNjcmlwdGlvbjtcbiAgICAgICAgdGFzay5hcHBlbmRDaGlsZCh0YXNrRGVzY3JpcHRpb24pO1xuXG4gICAgICAgIGxldCB0YXNrUHJpb3JpdHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzZWxlY3QnKTtcbiAgICAgICAgdGFza1ByaW9yaXR5LmNsYXNzTGlzdC5hZGQoJ3Rhc2tQcmlvcml0eScpXG4gICAgICAgIHRhc2tQcmlvcml0eS50ZXh0Q29udGVudCA9IGUucHJpb3JpdHk7XG4gICAgICAgIHRhc2suYXBwZW5kQ2hpbGQodGFza1ByaW9yaXR5KTtcblxuICAgICAgICBsZXQgbG93UHJpb3JpdHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcbiAgICAgICAgbG93UHJpb3JpdHkuY2xhc3NMaXN0LmFkZCgnbG93UHJpb3JpdHknKTtcbiAgICAgICAgbG93UHJpb3JpdHkudmFsdWUgPSAnTG93IFByaW9yaXR5JztcbiAgICAgICAgbG93UHJpb3JpdHkudGV4dENvbnRlbnQgPSAnTG93IFByaW9yaXR5J1xuICAgICAgICB0YXNrUHJpb3JpdHkuYXBwZW5kQ2hpbGQobG93UHJpb3JpdHkpO1xuXG4gICAgICAgIFxuXG4gICAgICAgIGxldCBoaWdoUHJpb3JpdHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcbiAgICAgICAgaGlnaFByaW9yaXR5LmNsYXNzTGlzdC5hZGQoJ2hpZ2hQcmlvcml0eScpO1xuICAgICAgICBoaWdoUHJpb3JpdHkudmFsdWUgPSAnSGlnaCBQcmlvcml0eSc7XG4gICAgICAgIGhpZ2hQcmlvcml0eS50ZXh0Q29udGVudCA9ICdIaWdoIFByaW9yaXR5J1xuICAgICAgICB0YXNrUHJpb3JpdHkuYXBwZW5kQ2hpbGQoaGlnaFByaW9yaXR5KTtcblxuICAgICAgICBcblxuICAgICAgICBsZXQgdGFza0R1ZURhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpXG4gICAgICAgIHRhc2tEdWVEYXRlLmNsYXNzTGlzdC5hZGQoJ3Nob3dEdWVEYXRlJyk7XG4gICAgICAgIHRhc2tEdWVEYXRlLnR5cGUgPSAnRGF0ZSc7XG4gICAgICAgIHRhc2tEdWVEYXRlLnZhbHVlID0gZS5kdWVEYXRlO1xuICAgICAgICB0YXNrLmFwcGVuZENoaWxkKHRhc2tEdWVEYXRlKTtcblxuICAgICAgICBsZXQgdGFza0VkaXRBbmRTdWJtaXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgdGFza0VkaXRBbmRTdWJtaXQuY2xhc3NMaXN0LmFkZCgndGFza0VkaXRBbmRTdWJtaXQnKTtcbiAgICAgICAgdGFza0VkaXRBbmRTdWJtaXQudGV4dENvbnRlbnQgPSAnU3VibWl0JztcbiAgICAgICAgdGFzay5hcHBlbmRDaGlsZCh0YXNrRWRpdEFuZFN1Ym1pdCk7XG5cbiAgICAgICAgdGFza1RpdGxlLmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJywgKGspPT57XG4gICAgICAgICAgICBpZiAoay5rZXkgPT0gJ0VudGVyJyl7XG4gICAgICAgICAgICAgICAgZS50aXRsZSA9IHRhc2tUaXRsZS52YWx1ZTtcbiAgICAgICAgICAgICAgICBlLmRlc2NyaXB0aW9uID0gdGFza0Rlc2NyaXB0aW9uLnZhbHVlO1xuICAgICAgICAgICAgICAgIGUucHJpb3JpdHkgPSB0YXNrUHJpb3JpdHkudmFsdWU7XG4gICAgICAgICAgICAgICAgZS5kdWVEYXRlID0gdGFza0R1ZURhdGUudmFsdWU7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cobXlQcm9qZWN0cyk7XG4gICAgICAgICAgICAgICAgdGFza1RpdGxlLmJsdXIoKTtcblxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGFza0Rlc2NyaXB0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJywgKGspPT57XG4gICAgICAgICAgICBpZiAoay5rZXkgPT0gJ0VudGVyJyl7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZS50aXRsZSA9IHRhc2tUaXRsZS52YWx1ZTtcbiAgICAgICAgICAgICAgICBlLmRlc2NyaXB0aW9uID0gdGFza0Rlc2NyaXB0aW9uLnZhbHVlO1xuICAgICAgICAgICAgICAgIGUucHJpb3JpdHkgPSB0YXNrUHJpb3JpdHkudmFsdWU7XG4gICAgICAgICAgICAgICAgZS5kdWVEYXRlID0gdGFza0R1ZURhdGUudmFsdWU7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cobXlQcm9qZWN0cyk7XG4gICAgICAgICAgICAgICAgdGFza0Rlc2NyaXB0aW9uLmJsdXIoKTtcblxuICAgICAgICAgICAgfTtcblxuICAgICAgICB9KVxuXG4gICAgICAgIHRhc2tFZGl0QW5kU3VibWl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PntcbiAgICAgICAgICAgIGUudGl0bGUgPSB0YXNrVGl0bGUudmFsdWU7XG4gICAgICAgICAgICBlLmRlc2NyaXB0aW9uID0gdGFza0Rlc2NyaXB0aW9uLnZhbHVlO1xuICAgICAgICAgICAgZS5wcmlvcml0eSA9IHRhc2tQcmlvcml0eS52YWx1ZTtcbiAgICAgICAgICAgIGUuZHVlRGF0ZSA9IHRhc2tEdWVEYXRlLnZhbHVlO1xuXG4gICAgICAgICAgICBpZiAoZS5wcmlvcml0eSA9PSAnSGlnaCBQcmlvcml0eScpe1xuICAgICAgICAgICAgICAgIHRhc2suc3R5bGUuYm9yZGVyQ29sb3IgPSAncmVkJ1xuICAgICAgICAgICAgICAgIGhpZ2hQcmlvcml0eS5zZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUucHJpb3JpdHkgPT0gJ0xvdyBQcmlvcml0eScpe1xuICAgICAgICAgICAgICAgIHRhc2suc3R5bGUuYm9yZGVyQ29sb3IgPSAnZ3JlZW4nXG4gICAgICAgICAgICAgICAgbG93UHJpb3JpdHkuc2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0YXNrLnN0eWxlLmJvcmRlckNvbG9yID0gJ2JsYWNrJ1xuICAgICAgICAgICAgfVxuICAgIFxuXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0YXNrQXJyYXkpXG5cblxuICAgICAgICB9KVxuICAgICAgICBcblxuICAgICAgICBpZiAoZS5wcmlvcml0eSA9PSAnSGlnaCBQcmlvcml0eScpe1xuICAgICAgICAgICAgdGFzay5zdHlsZS5ib3JkZXJDb2xvciA9ICdyZWQnXG4gICAgICAgICAgICBoaWdoUHJpb3JpdHkuc2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgICB9IGVsc2UgaWYgKGUucHJpb3JpdHkgPT0gJ0xvdyBQcmlvcml0eScpe1xuICAgICAgICAgICAgdGFzay5zdHlsZS5ib3JkZXJDb2xvciA9ICdncmVlbidcbiAgICAgICAgICAgIGxvd1ByaW9yaXR5LnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRhc2suc3R5bGUuYm9yZGVyQ29sb3IgPSAnYmxhY2snXG4gICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcblxuXG5cbiAgICAgICAgbGV0IHRhc2tEZWxldGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKVxuICAgICAgICB0YXNrRGVsZXRlLmNsYXNzTGlzdC5hZGQoJ3Rhc2tEZWxldGUnKTtcbiAgICAgICAgdGFza0RlbGV0ZS50ZXh0Q29udGVudCA9ICdEZWxldGUnO1xuICAgICAgICB0YXNrLmFwcGVuZENoaWxkKHRhc2tEZWxldGUpO1xuICAgICAgICB0YXNrRGVsZXRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PntcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGFza0FycmF5LnNwbGljZShpICwgMSk7XG4gICAgICAgICAgICB0YXNrLnJlbW92ZSgpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coaSlcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgICAgICAgICAgY29uc29sZS5sb2codGFza0FycmF5KVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcblxuICAgICAgICB9KVxuXG5cblxuXG4gICAgfSlcblxufVxuXG5cblxuXG5mdW5jdGlvbiBjcmVhdGVUYXNrIChpKXtcblxuICAgIGNvbnN0IHRhc2tGb3JtQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRhc2tGb3JtQ29udGFpbmVyJyk7XG4gICAgdGFza0Zvcm1Db250YWluZXIuaW5uZXJIVE1MID0gJyc7XG5cbiAgICBjb25zdCB0YXNrQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRhc2tDb250YWluZXInKVxuXG4gICAgXG5cbiAgICBcblxuICAgIGNvbnN0IHRhc2tUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgdGFza1RpdGxlLnNldEF0dHJpYnV0ZSgnaWQnLCAndGFza1RpdGxlJylcbiAgICB0YXNrVGl0bGUucGxhY2Vob2xkZXIgPSAndGl0bGUnO1xuICAgIHRhc2tGb3JtQ29udGFpbmVyLmFwcGVuZENoaWxkKHRhc2tUaXRsZSk7XG5cbiAgICBjb25zdCB0YXNrRGVzY3JpcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgIHRhc2tEZXNjcmlwdGlvbi5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3Rhc2tEZXNjcmlwdGlvbicpO1xuICAgIHRhc2tEZXNjcmlwdGlvbi5wbGFjZWhvbGRlciA9ICdkZXNjcmlwdGlvbidcbiAgICB0YXNrRm9ybUNvbnRhaW5lci5hcHBlbmRDaGlsZCh0YXNrRGVzY3JpcHRpb24pO1xuXG4gICAgY29uc3QgdGFza1ByaW9yaXR5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2VsZWN0Jyk7XG4gICAgdGFza1ByaW9yaXR5LnNldEF0dHJpYnV0ZSgnaWQnLCAndGFza1ByaW9yaXR5Jyk7XG4gICAgdGFza0Zvcm1Db250YWluZXIuYXBwZW5kQ2hpbGQodGFza1ByaW9yaXR5KTtcblxuICAgIGNvbnN0IGhpZ2hQcmlvcml0eSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xuICAgIGhpZ2hQcmlvcml0eS52YWx1ZSA9ICdIaWdoIFByaW9yaXR5J1xuICAgIGhpZ2hQcmlvcml0eS50ZXh0Q29udGVudCA9ICdIaWdoIFByaW9yaXR5J1xuICAgIHRhc2tQcmlvcml0eS5hcHBlbmRDaGlsZChoaWdoUHJpb3JpdHkpO1xuXG4gICAgY29uc3QgbG93UHJpb3JpdHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcbiAgICBsb3dQcmlvcml0eS52YWx1ZSA9ICdMb3cgUHJpb3JpdHknXG4gICAgbG93UHJpb3JpdHkudGV4dENvbnRlbnQgPSAnTG93IFByaW9yaXR5J1xuICAgIHRhc2tQcmlvcml0eS5hcHBlbmRDaGlsZChsb3dQcmlvcml0eSk7XG5cbiAgICBjb25zdCB0YXNrRHVlRGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgdGFza0R1ZURhdGUuc2V0QXR0cmlidXRlKCdpZCcsICd0YXNrRHVlRGF0ZScpXG4gICAgdGFza0R1ZURhdGUudHlwZSA9ICdEYXRlJztcbiAgICB0YXNrRHVlRGF0ZS50ZXh0Q29udGVudCA9ICdEdWUgRGF0ZSc7XG4gICAgdGFza0Zvcm1Db250YWluZXIuYXBwZW5kQ2hpbGQodGFza0R1ZURhdGUpO1xuXG4gICAgY29uc3Qgc3VibWl0VGFzayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIHN1Ym1pdFRhc2suc2V0QXR0cmlidXRlKCdpZCcsICdzdWJtaXRUYXNrJyk7XG4gICAgc3VibWl0VGFzay50ZXh0Q29udGVudCA9ICdTdWJtaXQnXG4gICAgdGFza0Zvcm1Db250YWluZXIuYXBwZW5kQ2hpbGQoc3VibWl0VGFzayk7XG5cbiAgICBjb25zdCBjYW5jZWxUYXNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgY2FuY2VsVGFzay5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2NhbmNlbFRhc2snKTtcbiAgICBjYW5jZWxUYXNrLnRleHRDb250ZW50ID0gJ0NhbmNlbCdcbiAgICB0YXNrRm9ybUNvbnRhaW5lci5hcHBlbmRDaGlsZChjYW5jZWxUYXNrKTtcblxuICAgIFxuXG4gICAgc3VibWl0VGFzay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57XG4gICAgICAgIFxuXG4gICAgICAgIFxuXG4gICAgICAgIGxldCB0aXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YXNrVGl0bGUnKS52YWx1ZTtcbiAgICAgICAgbGV0IGRlc2NyaXB0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rhc2tEZXNjcmlwdGlvbicpLnZhbHVlO1xuICAgICAgICBsZXQgcHJpb3JpdHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFza1ByaW9yaXR5JykudmFsdWU7XG4gICAgICAgIGxldCBkdWVEYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rhc2tEdWVEYXRlJykudmFsdWU7XG5cbiAgICAgICAgXG5cbiAgICAgICAgbGV0IHRhc2tPYmogPSBuZXcgVGFzayAodGl0bGUsIGRlc2NyaXB0aW9uLCBwcmlvcml0eSwgZHVlRGF0ZSlcbiAgICAgICAgbXlQcm9qZWN0cy5hdChpKS50YXNrcy5wdXNoKHRhc2tPYmopO1xuXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2cobXlQcm9qZWN0cylcbiAgICAgICAgY29uc29sZS5sb2cocHJpb3JpdHkpXG5cbiAgICAgICAgZGlzcGxheVRhc2tzKGkpXG5cbiAgICAgICAgXG5cbiAgICAgICAgbGV0IHRhc2tGb3JtQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRhc2tGb3JtQ29udGFpbmVyJyk7XG4gICAgICAgIHRhc2tGb3JtQ29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcbiAgICAgICAgXG4gICAgICAgIFxuXG4gICAgfSlcblxuICAgIGNhbmNlbFRhc2suYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+e1xuICAgICAgICB0YXNrRm9ybUNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG5cbiAgICB9KVxuXG4gICAgICAgIFxuXG59XG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hbGxUYXNrcycpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PntcbiAgICBjb25zdCB0YXNrQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rhc2tCdXR0b24nKVxuICAgIHRhc2tCdXR0b24uc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuICAgIGNvbnN0IHRhc2tGb3JtQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRhc2tGb3JtQ29udGFpbmVyJyk7XG4gICAgdGFza0Zvcm1Db250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50SGVhZGVyJykudGV4dENvbnRlbnQgPSAnQWxsJ1xuICAgIGNvbnN0IHRhc2tDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGFza0NvbnRhaW5lcicpO1xuICAgIHRhc2tDb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG4gICAgbXlQcm9qZWN0cy5mb3JFYWNoKChlLGkpPT57XG4gICAgICAgIGxldCB0YXNrQXJyYXkgPSBlLnRhc2tzXG4gICAgICAgIHRhc2tBcnJheS5mb3JFYWNoKChlLGkpPT57XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlKVxuXG4gICAgICAgICAgICBcblxuICAgICAgICAgICAgXG5cbiAgICAgICAgICAgIFxuXG4gICAgICAgICAgICBsZXQgdGFzayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgdGFzay5jbGFzc0xpc3QuYWRkKCd0YXNrJylcbiAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRhc2tDb250YWluZXIuYXBwZW5kQ2hpbGQodGFzaylcbiAgICBcbiAgICAgICAgICAgIGxldCB0YXNrVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICAgICAgdGFza1RpdGxlLmNsYXNzTGlzdC5hZGQoJ3Rhc2tUaXRsZScpO1xuICAgICAgICAgICAgdGFza1RpdGxlLnZhbHVlID0gZS50aXRsZTtcbiAgICAgICAgICAgIHRhc2suYXBwZW5kQ2hpbGQodGFza1RpdGxlKTtcbiAgICBcbiAgICAgICAgICAgIGxldCB0YXNrRGVzY3JpcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICAgICAgdGFza0Rlc2NyaXB0aW9uLmNsYXNzTGlzdC5hZGQoJ3Rhc2tEZXNjcmlwdGlvbicpXG4gICAgICAgICAgICB0YXNrRGVzY3JpcHRpb24udmFsdWUgPSBlLmRlc2NyaXB0aW9uO1xuICAgICAgICAgICAgdGFzay5hcHBlbmRDaGlsZCh0YXNrRGVzY3JpcHRpb24pO1xuICAgIFxuICAgICAgICAgICAgbGV0IHRhc2tQcmlvcml0eSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NlbGVjdCcpO1xuICAgICAgICAgICAgdGFza1ByaW9yaXR5LmNsYXNzTGlzdC5hZGQoJ3Rhc2tQcmlvcml0eScpXG4gICAgICAgICAgICB0YXNrUHJpb3JpdHkudGV4dENvbnRlbnQgPSBlLnByaW9yaXR5O1xuICAgICAgICAgICAgdGFzay5hcHBlbmRDaGlsZCh0YXNrUHJpb3JpdHkpO1xuICAgIFxuICAgICAgICAgICAgbGV0IGxvd1ByaW9yaXR5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XG4gICAgICAgICAgICBsb3dQcmlvcml0eS5jbGFzc0xpc3QuYWRkKCdsb3dQcmlvcml0eScpO1xuICAgICAgICAgICAgbG93UHJpb3JpdHkudmFsdWUgPSAnTG93IFByaW9yaXR5JztcbiAgICAgICAgICAgIGxvd1ByaW9yaXR5LnRleHRDb250ZW50ID0gJ0xvdyBQcmlvcml0eSdcbiAgICAgICAgICAgIHRhc2tQcmlvcml0eS5hcHBlbmRDaGlsZChsb3dQcmlvcml0eSk7XG4gICAgXG4gICAgICAgICAgICBcbiAgICBcbiAgICAgICAgICAgIGxldCBoaWdoUHJpb3JpdHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcbiAgICAgICAgICAgIGhpZ2hQcmlvcml0eS5jbGFzc0xpc3QuYWRkKCdoaWdoUHJpb3JpdHknKTtcbiAgICAgICAgICAgIGhpZ2hQcmlvcml0eS52YWx1ZSA9ICdIaWdoIFByaW9yaXR5JztcbiAgICAgICAgICAgIGhpZ2hQcmlvcml0eS50ZXh0Q29udGVudCA9ICdIaWdoIFByaW9yaXR5J1xuICAgICAgICAgICAgdGFza1ByaW9yaXR5LmFwcGVuZENoaWxkKGhpZ2hQcmlvcml0eSk7XG4gICAgXG4gICAgICAgICAgICBcbiAgICBcbiAgICAgICAgICAgIGxldCB0YXNrRHVlRGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0JylcbiAgICAgICAgICAgIHRhc2tEdWVEYXRlLmNsYXNzTGlzdC5hZGQoJ3Nob3dEdWVEYXRlJyk7XG4gICAgICAgICAgICB0YXNrRHVlRGF0ZS50eXBlID0gJ0RhdGUnO1xuICAgICAgICAgICAgdGFza0R1ZURhdGUudmFsdWUgPSBlLmR1ZURhdGU7XG4gICAgICAgICAgICB0YXNrLmFwcGVuZENoaWxkKHRhc2tEdWVEYXRlKTtcbiAgICBcbiAgICAgICAgICAgIGxldCB0YXNrRWRpdEFuZFN1Ym1pdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICAgICAgdGFza0VkaXRBbmRTdWJtaXQuY2xhc3NMaXN0LmFkZCgndGFza0VkaXRBbmRTdWJtaXQnKTtcbiAgICAgICAgICAgIHRhc2tFZGl0QW5kU3VibWl0LnRleHRDb250ZW50ID0gJ1N1Ym1pdCc7XG4gICAgICAgICAgICB0YXNrLmFwcGVuZENoaWxkKHRhc2tFZGl0QW5kU3VibWl0KTtcblxuICAgICAgICAgICAgdGFza1RpdGxlLmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJywgKGspPT57XG4gICAgICAgICAgICAgICAgaWYgKGsua2V5ID09ICdFbnRlcicpe1xuICAgICAgICAgICAgICAgICAgICBlLnRpdGxlID0gdGFza1RpdGxlLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBlLmRlc2NyaXB0aW9uID0gdGFza0Rlc2NyaXB0aW9uLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBlLnByaW9yaXR5ID0gdGFza1ByaW9yaXR5LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBlLmR1ZURhdGUgPSB0YXNrRHVlRGF0ZS52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG15UHJvamVjdHMpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrVGl0bGUuYmx1cigpO1xuICAgIFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgICAgIHRhc2tEZXNjcmlwdGlvbi5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIChrKT0+e1xuICAgICAgICAgICAgICAgIGlmIChrLmtleSA9PSAnRW50ZXInKXtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGUudGl0bGUgPSB0YXNrVGl0bGUudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGUuZGVzY3JpcHRpb24gPSB0YXNrRGVzY3JpcHRpb24udmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGUucHJpb3JpdHkgPSB0YXNrUHJpb3JpdHkudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGUuZHVlRGF0ZSA9IHRhc2tEdWVEYXRlLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cobXlQcm9qZWN0cyk7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tEZXNjcmlwdGlvbi5ibHVyKCk7XG4gICAgXG4gICAgICAgICAgICAgICAgfTtcbiAgICBcbiAgICAgICAgICAgIH0pXG4gICAgXG4gICAgICAgICAgICB0YXNrRWRpdEFuZFN1Ym1pdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57XG4gICAgICAgICAgICAgICAgZS50aXRsZSA9IHRhc2tUaXRsZS52YWx1ZTtcbiAgICAgICAgICAgICAgICBlLmRlc2NyaXB0aW9uID0gdGFza0Rlc2NyaXB0aW9uLnZhbHVlO1xuICAgICAgICAgICAgICAgIGUucHJpb3JpdHkgPSB0YXNrUHJpb3JpdHkudmFsdWU7XG4gICAgICAgICAgICAgICAgZS5kdWVEYXRlID0gdGFza0R1ZURhdGUudmFsdWU7XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKGUucHJpb3JpdHkgPT0gJ0hpZ2ggUHJpb3JpdHknKXtcbiAgICAgICAgICAgICAgICAgICAgdGFzay5zdHlsZS5ib3JkZXJDb2xvciA9ICdyZWQnXG4gICAgICAgICAgICAgICAgICAgIGhpZ2hQcmlvcml0eS5zZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlLnByaW9yaXR5ID09ICdMb3cgUHJpb3JpdHknKXtcbiAgICAgICAgICAgICAgICAgICAgdGFzay5zdHlsZS5ib3JkZXJDb2xvciA9ICdncmVlbidcbiAgICAgICAgICAgICAgICAgICAgbG93UHJpb3JpdHkuc2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRhc2suc3R5bGUuYm9yZGVyQ29sb3IgPSAnYmxhY2snXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICBcbiAgICBcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0YXNrQXJyYXkpXG4gICAgXG4gICAgXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgXG4gICAgXG4gICAgICAgICAgICBpZiAoZS5wcmlvcml0eSA9PSAnSGlnaCBQcmlvcml0eScpe1xuICAgICAgICAgICAgICAgIHRhc2suc3R5bGUuYm9yZGVyQ29sb3IgPSAncmVkJ1xuICAgICAgICAgICAgICAgIGhpZ2hQcmlvcml0eS5zZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUucHJpb3JpdHkgPT0gJ0xvdyBQcmlvcml0eScpe1xuICAgICAgICAgICAgICAgIHRhc2suc3R5bGUuYm9yZGVyQ29sb3IgPSAnZ3JlZW4nXG4gICAgICAgICAgICAgICAgbG93UHJpb3JpdHkuc2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0YXNrLnN0eWxlLmJvcmRlckNvbG9yID0gJ2JsYWNrJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgICAgICAgICAgbGV0IHRhc2tEZWxldGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKVxuICAgICAgICAgICAgdGFza0RlbGV0ZS5jbGFzc0xpc3QuYWRkKCd0YXNrRGVsZXRlJyk7XG4gICAgICAgICAgICB0YXNrRGVsZXRlLnRleHRDb250ZW50ID0gJ0RlbGV0ZSc7XG4gICAgICAgICAgICB0YXNrLmFwcGVuZENoaWxkKHRhc2tEZWxldGUpO1xuICAgICAgICAgICAgdGFza0RlbGV0ZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGFza0FycmF5LnNwbGljZShpICwgMSk7XG4gICAgICAgICAgICAgICAgdGFzay5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhpKVxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRhc2tBcnJheSlcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBcbiAgICBcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIFxuICAgICAgICB9KVxuICAgIH0pXG59KVxuXG4gICAgXG5cbiAgICAgICAgXG5cbiAgICAgICAgXG5cbiAgICAgICAgXG5cbiAgICAgICAgXG4gICAgICAgICAgICBcblxuXG5cblxuXG5cblxuXG5cblxuXG4gICAgXG5cblxuXG5cbiAgICAgICAgXG4gICAgICAgIFxuXG5cblxuICAgICAgICAgICAgXG5cblxuICAgICAgICAgICAgXG5cbiAgICAgICAgICAgIFxuXG5cblxuXG5cblxuXG5cblxuXG5cbiAgICBcblxuXG5cbiJdLCJuYW1lcyI6WyJteVByb2plY3RzIiwiUHJvamVjdCIsImNvbnN0cnVjdG9yIiwidGl0bGUiLCJpbmRleCIsInRhc2tzIiwidGhpcyIsIlRhc2siLCJkZXNjcmlwdGlvbiIsInByaW9yaXR5IiwiZHVlRGF0ZSIsInByb2plY3RDbGljayIsInByb2plY3RDb250YWluZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50SGVhZGVyIiwidGFza0NvbnRhaW5lciIsIkFycmF5IiwiZnJvbSIsImNoaWxkcmVuIiwiZm9yRWFjaCIsInByb2plY3QiLCJpIiwibGVuZ3RoIiwiZGVsZXRlUHJvamVjdCIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJ0ZXh0Q29udGVudCIsImFwcGVuZENoaWxkIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNwbGljZSIsInJlbW92ZSIsImNvbnNvbGUiLCJsb2ciLCJpbm5lckhUTUwiLCJkaXNwbGF5VGFza3MiLCJ0YXNrRm9ybUNvbnRhaW5lciIsInRhc2tUaXRsZSIsInBsYWNlaG9sZGVyIiwidGFza0Rlc2NyaXB0aW9uIiwidGFza1ByaW9yaXR5IiwiaGlnaFByaW9yaXR5IiwidmFsdWUiLCJsb3dQcmlvcml0eSIsInRhc2tEdWVEYXRlIiwidHlwZSIsInN1Ym1pdFRhc2siLCJjYW5jZWxUYXNrIiwiZ2V0RWxlbWVudEJ5SWQiLCJ0YXNrT2JqIiwiYXQiLCJwdXNoIiwic3R5bGUiLCJ2aXNpYmlsaXR5IiwiY3JlYXRlVGFzayIsInRhc2tCdXR0b24iLCJ0YXNrQXJyYXkiLCJlIiwidGFzayIsImNsYXNzTGlzdCIsImFkZCIsInRhc2tFZGl0QW5kU3VibWl0IiwiayIsImtleSIsImJsdXIiLCJib3JkZXJDb2xvciIsInNlbGVjdGVkIiwidGFza0RlbGV0ZSIsImFkZFByb2plY3QiLCJkZWZhdWx0UHJvamVjdCIsInByb2plY3RGb3JtQ29udGFpbmVyIiwicHJvamVjdEJ1dHRvbiIsInByb2plY3ROYW1lIiwic3VibWl0IiwicHJvamVjdE9iaiIsImNhbmNlbFByb2plY3QiXSwic291cmNlUm9vdCI6IiJ9